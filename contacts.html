<!DOCTYPE html>
<html>
<head>
<title>Contacts Page</title>
<meta charset="UTF-8"> 
</head>
<style>
  body{
    background-color:lightblue;
}
form.a{
    margin: 200px 400px;
}


</style>

<body>
<div>

<div id="contacts">
<form  class="a" name="signup" method="POST" >
<table>
<tr>
    <th><h1>CONTACTS</h1></th>
  </tr>
<tr><td>NAME:</td><td><input type="text" name="username" id="username" onfocus="this.value=''"></td>
  <tr><td>   <span id="alertname" name="alertname"  style="color:red"> </span></td>
<tr><td>EMAIL ID:</td><td><input type="text" name="email" id="email"></td>
  <tr><td>   <span id="alertemail" name="alertemail"  style="color:red"> </span></td>
  <tr><td>PHONE:</td><td><input type="text" name="phno" id="phno" onfocus="this.value=''"></td>
    <tr><td>   <span id="alertphno" name="alertphno"  style="color:red"> </span></td>
    <tr><td>QUESTION:</td><td><textarea rows="10" cols="50"  name="question" id="question"  value=""></textarea></td>
      <tr><td>   <span id="alertque" name="alertque"  style="color:red"> </span></td>
    <tr><td><input type="button" value="Send" onClick="submitdata()"></td>
      <tr><td>   <span id="msg" name="msg"  style="color:blue"> </span></td>
<script>

function submitdata(){
  var uname= document.getElementById("username");
  var phone= document.getElementById("phno");
  var email= document.getElementById("email");
  var quest=document.getElementById("question");
  
if(uname.value == ""){
 // alert("name required");
 document.getElementById("alertname").innerText ="name required";
  return false;
}
if(uname.value!="" ){
  if(uname.value.length<3 || uname.value.length>20){
    //alert(" name length should be minimum 1 and maximum 20");
    document.getElementById("alertname").innerText ="name length should be minimum 3 and maximum 20";
    return false;
  }
  else{
document.getElementById("alertname").innerText ="";
  }
}
if(email.value == ""){
  //alert("email required");
  document.getElementById("alertemail").innerText ="email required";
  return false;
}
if(email.value != ""){
//var email = document.getElementById('txtEmail');
    //var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

    if (!(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email.value))) {
   // alert('Please provide a valid email address');
   document.getElementById("alertemail").innerText = "Provide a valid email id";
    //inputi.focus;
    return false;
}
else{
document.getElementById("alertemail").innerText ="";
  }

}

if(phone.value == ""){
  //alert("password required");
  document.getElementById("alertphno").innerText ="phone number required";
  return false;
}
if(phone.value!=null  ){
    var phonepattern=/(6|7|8|9)\d{9}/
    if(!(phonepattern.test(phone.value)) && phone.value.length != 10){
        ///alert("enter valid phone number");
        document.getElementById("alertphno").innerText ="Enter valid phone number";
        return false;
    }
    else{
      document.getElementById("alertemail").innerText ="";
    }
  
}
if(quest.value == ""){
  //alert("password required");
  document.getElementById("alertque").innerText ="Question required";
  return false;
}
if(quest.value!= ""){
  if(quest.value.length<1 && quest.value.length>200){
    document.getElementById("alertque")="";
  }
}
var formdata ={name: uname.value,phone: phone.value,email: email.value,question:quest.value};
var api = "http://demo6835492.mockable.io/sendEmail";
var jsonString = JSON.stringify(formdata);
var method = "POST";
var type = "application/JSON";

//alert(jsonString);
var request = new XMLHttpRequest();
request.open("POST", api, true);
request.setRequestHeader('Content-Type', 'application/json');
request.send(jsonString);

request.onload = function(){
// alert("hi");
  var data = JSON.parse(request.responseText);
  alert(request.responseText);
  //document.getElementById(msg).innerText=data;
  }
  

}

</script>

</table>
</form>

</div>

</div>
</body>
</html>
